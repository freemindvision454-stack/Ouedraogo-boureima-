{"version":3,"names":["parseWebVTT","content","cues","lines","replace","split","i","length","_lines$i","includes","_lines$i2","line","trim","timeMatch","match","startTime","parseVTTTime","endTime","textLines","_lines$i3","_lines$i4","textLine","push","start","end","text","join","exports","timeStr","parts","lastPart","seconds","hours","parseInt","minutes","secs","milliseconds","findActiveSubtitle","currentTime","find","cue","parseM3U8ForVTTUrl","baseUrl","trimmedLine","startsWith","vttUrl","urlObj","URL","protocol","host","basePath","substring","lastIndexOf","fetchSubtitleFile","url","response","fetch","ok","Error","status","console","warn","error"],"sourceRoot":"../../../../../../src","sources":["widgets/video/layer/utils/subtitleUtils.ts"],"mappings":"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","ignoreList":[]}