{"version":3,"names":["_isMobile","require","_eventsCollector","_uniqueIds","_sendBeaconRequest","_events","_validators","_nativeHtmlVideoPlayerAdapter","_customerData","_pageEvents","CLD_ANALYTICS_ENDPOINTS_LIST","production","default","liveStreams","development","CLD_ANALYTICS_ENDPOINT","process","env","NODE_ENV","connectCloudinaryAnalytics","videoElement","mainOptions","throwErrorIfInvalid","mainOptionsValidator","playerAdapter","nativeHtmlVideoPlayerAdapter","videoTrackingSession","userId","getUserId","isMobileDetected","isMobile","tablet","featureDetect","createEventsCollector","initEventsCollector","clearVideoTracking","clear","viewId","_value","getVideoViewId","getValue","regenerateValue","startManualTracking","metadata","options","_videoTrackingSession","type","metadataValidator","trackingOptionsValidator","_startManualTrackingLiveStream","customVideoUrlFallback","_startManualTrackingRegularVideo","sendData","data","sendBeaconRequest","videoViewEventCollector","finishVideoTracking","getCollectedEventsCount","addEvent","createRegularVideoViewEndEvent","events","prepareEvents","flushEvents","pageEventsRemoval","createPageTracker","onPageViewStart","start","createRegularVideoViewStartEvent","videoUrl","getCurrentSrc","trackingType","onPageViewEnd","destroy","subtype","liveStreamData","parseCustomerVideoData","sendLiveStreamEvent","event","createLiveStreamViewStartEvent","createLiveStreamViewEndEvent","startAutoTracking","sendRequest","isCollectorActive","startVideoTracking","sourceUrl","createAppStateTracker","onAppForeground","onAppBackground","onLoadStart","onEmptied","stopManualTracking","exports"],"sourceRoot":"../../../../../src","sources":["widgets/video/analytics/cloudinary-analytics.js"],"mappings":"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","ignoreList":[]}