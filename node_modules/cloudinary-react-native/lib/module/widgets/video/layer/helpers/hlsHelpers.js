import { isHLSVideo, parseHLSManifest, parseHLSQualityLevels, getVideoUrl } from '../utils';
export async function parseHLSSubtitlesIfNeeded(props, updateState) {
  const videoUrl = getVideoUrl(props.videoUrl, props.cldVideo);
  if (isHLSVideo(videoUrl)) {
    try {
      const subtitleTracks = await parseHLSManifest(videoUrl);
      const availableSubtitleTracks = [{
        code: 'off',
        label: 'Off'
      }, ...subtitleTracks];
      updateState({
        availableSubtitleTracks
      });
    } catch (error) {
      console.warn('Failed to parse HLS subtitles:', error);
      updateState({
        availableSubtitleTracks: [{
          code: 'off',
          label: 'Off'
        }]
      });
    }
  }
}
export async function parseHLSQualityLevelsIfNeeded(props, updateState) {
  const videoUrl = getVideoUrl(props.videoUrl, props.cldVideo);
  if (isHLSVideo(videoUrl)) {
    try {
      const qualityLevels = await parseHLSQualityLevels(videoUrl);
      const availableQualityLevels = [{
        value: 'auto',
        label: 'Auto'
      }, ...qualityLevels];
      updateState({
        availableQualityLevels
      });
    } catch (error) {
      console.warn('Failed to parse HLS quality levels:', error);
      updateState({
        availableQualityLevels: [{
          value: 'auto',
          label: 'Auto'
        }]
      });
    }
  }
}
//# sourceMappingURL=hlsHelpers.js.map