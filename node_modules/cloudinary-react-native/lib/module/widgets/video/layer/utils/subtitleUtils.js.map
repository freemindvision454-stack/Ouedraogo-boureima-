{"version":3,"names":["parseWebVTT","content","cues","lines","replace","split","i","length","_lines$i","includes","_lines$i2","line","trim","timeMatch","match","startTime","parseVTTTime","endTime","textLines","_lines$i3","_lines$i4","textLine","push","start","end","text","join","timeStr","parts","lastPart","seconds","hours","parseInt","minutes","secs","milliseconds","findActiveSubtitle","currentTime","find","cue","parseM3U8ForVTTUrl","baseUrl","trimmedLine","startsWith","vttUrl","urlObj","URL","protocol","host","basePath","substring","lastIndexOf","fetchSubtitleFile","url","response","fetch","ok","Error","status","console","warn","error"],"sourceRoot":"../../../../../../src","sources":["widgets/video/layer/utils/subtitleUtils.ts"],"mappings":"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","ignoreList":[]}