{"version":3,"names":["isMobile","initEventsCollector","getVideoViewId","getUserId","sendBeaconRequest","createRegularVideoViewEndEvent","createLiveStreamViewStartEvent","createLiveStreamViewEndEvent","createRegularVideoViewStartEvent","prepareEvents","throwErrorIfInvalid","metadataValidator","mainOptionsValidator","trackingOptionsValidator","nativeHtmlVideoPlayerAdapter","parseCustomerVideoData","createPageTracker","CLD_ANALYTICS_ENDPOINTS_LIST","production","default","liveStreams","development","CLD_ANALYTICS_ENDPOINT","process","env","NODE_ENV","connectCloudinaryAnalytics","videoElement","mainOptions","playerAdapter","videoTrackingSession","userId","isMobileDetected","tablet","featureDetect","createEventsCollector","clearVideoTracking","clear","viewId","_value","getValue","regenerateValue","startManualTracking","metadata","options","_videoTrackingSession","type","_startManualTrackingLiveStream","customVideoUrlFallback","_startManualTrackingRegularVideo","sendData","data","videoViewEventCollector","finishVideoTracking","getCollectedEventsCount","addEvent","events","flushEvents","pageEventsRemoval","onPageViewStart","start","videoUrl","getCurrentSrc","trackingType","onPageViewEnd","destroy","subtype","liveStreamData","sendLiveStreamEvent","event","startAutoTracking","sendRequest","isCollectorActive","startVideoTracking","sourceUrl","createAppStateTracker","onAppForeground","onAppBackground","onLoadStart","onEmptied","stopManualTracking"],"sourceRoot":"../../../../../src","sources":["widgets/video/analytics/cloudinary-analytics.js"],"mappings":"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","ignoreList":[]}